import os as o
import requests as r
import psutil as u 
import json as j
import base64 as b
'''
Simple function that returns a list of string,
containing the usernames including hidden names in ranked que through the LCU.
'''
def ranked_name_exploit():
    [x]=[[i.cmdline()[2].split('=')[1],i.cmdline()[1].split('=')[1]] for i in u.process_iter() if i.name() == 'LeagueClient.exe']
    e=list(r.get(url=f'https://127.0.0.1:{x[0]}/chat/v5/participants/champ-select',headers={'Authorization':f"Basic {b.b64encode(f'riot:{x[1]}'.encode()).decode()}",'Accept': 'application/json'},verify=r"{}\riotgames.pem".format(o.getcwd())))
    return [ i['name'] for i in j.loads(''.join(s.decode() for s in e))['participants']]
'''
Print out player names for quick multisearch.
'''
print(''.join(str(i)+',' for i in ranked_name_exploit())[:-1])